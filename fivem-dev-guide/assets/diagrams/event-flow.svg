<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 18px sans-serif; fill: #333; }
      .subtitle { font: 14px sans-serif; fill: #666; }
      .box { fill: #f8f9fa; stroke: #007bff; stroke-width: 2; rx: 8; }
      .server-box { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; rx: 8; }
      .client-box { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; rx: 8; }
      .arrow { stroke: #333; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .event-arrow { stroke: #28a745; stroke-width: 3; fill: none; marker-end: url(#arrowhead); }
      .text { font: 12px sans-serif; fill: #333; text-anchor: middle; }
      .event-text { font: bold 11px sans-serif; fill: #28a745; text-anchor: middle; }
      .code { font: 10px monospace; fill: #666; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" class="title">FiveM Client-Server Event Flow</text>
  <text x="400" y="50" class="subtitle">How events are triggered and handled between client and server</text>
  
  <!-- Server Side -->
  <rect x="50" y="80" width="300" height="480" class="server-box" />
  <text x="200" y="105" class="text" style="font-weight: bold; font-size: 14px;">SERVER SIDE</text>
  
  <!-- Client Side -->
  <rect x="450" y="80" width="300" height="480" class="client-box" />
  <text x="600" y="105" class="text" style="font-weight: bold; font-size: 14px;">CLIENT SIDE</text>
  
  <!-- Server Components -->
  <rect x="70" y="130" width="120" height="60" class="box" />
  <text x="130" y="155" class="text">Server Script</text>
  <text x="130" y="170" class="code">server.lua</text>
  
  <rect x="210" y="130" width="120" height="60" class="box" />
  <text x="270" y="155" class="text">Event Handler</text>
  <text x="270" y="170" class="code">AddEventHandler</text>
  
  <rect x="70" y="220" width="120" height="60" class="box" />
  <text x="130" y="245" class="text">Database</text>
  <text x="130" y="260" class="code">MySQL/SQLite</text>
  
  <rect x="210" y="220" width="120" height="60" class="box" />
  <text x="270" y="245" class="text">Game Logic</text>
  <text x="270" y="260" class="code">Business Rules</text>
  
  <rect x="140" y="310" width="120" height="60" class="box" />
  <text x="200" y="335" class="text">Response</text>
  <text x="200" y="350" class="code">TriggerClientEvent</text>
  
  <!-- Client Components -->
  <rect x="470" y="130" width="120" height="60" class="box" />
  <text x="530" y="155" class="text">Client Script</text>
  <text x="530" y="170" class="code">client.lua</text>
  
  <rect x="610" y="130" width="120" height="60" class="box" />
  <text x="670" y="155" class="text">Event Handler</text>
  <text x="670" y="170" class="code">AddEventHandler</text>
  
  <rect x="470" y="220" width="120" height="60" class="box" />
  <text x="530" y="245" class="text">User Input</text>
  <text x="530" y="260" class="code">Commands/Keys</text>
  
  <rect x="610" y="220" width="120" height="60" class="box" />
  <text x="670" y="245" class="text">Game World</text>
  <text x="670" y="260" class="code">Entities/UI</text>
  
  <rect x="540" y="310" width="120" height="60" class="box" />
  <text x="600" y="335" class="text">Request</text>
  <text x="600" y="350" class="code">TriggerServerEvent</text>
  
  <!-- Event Flow Arrows -->
  <!-- 1. User Input to Request -->
  <path d="M 530 280 L 530 300 L 600 300 L 600 310" class="event-arrow" />
  <text x="565" y="295" class="event-text">1. User Action</text>
  
  <!-- 2. Request to Server -->
  <path d="M 540 340 L 400 340 L 400 360 L 260 360" class="event-arrow" />
  <text x="400" y="335" class="event-text">2. TriggerServerEvent</text>
  <text x="400" y="355" class="code">'player:spawnVehicle'</text>
  
  <!-- 3. Server Processing -->
  <path d="M 210 160 L 190 160 L 190 200 L 130 200 L 130 220" class="arrow" />
  <text x="150" y="195" class="text">3. Process</text>
  
  <path d="M 190 250 L 210 250" class="arrow" />
  
  <path d="M 270 220 L 270 200 L 200 200 L 200 310" class="arrow" />
  
  <!-- 4. Response to Client -->
  <path d="M 260 340 L 400 340 L 400 380 L 530 380 L 530 370" class="event-arrow" />
  <text x="400" y="395" class="event-text">4. TriggerClientEvent</text>
  <text x="400" y="410" class="code">'vehicle:spawned'</text>
  
  <!-- 5. Client Update -->
  <path d="M 590 340 L 610 340 L 610 300 L 670 300 L 670 280" class="arrow" />
  <text x="640" y="295" class="text">5. Update UI</text>
  
  <!-- Event Examples -->
  <rect x="50" y="420" width="700" height="120" class="box" style="fill: #fff3cd; stroke: #856404;" />
  <text x="400" y="440" class="text" style="font-weight: bold;">Common Event Examples</text>
  
  <text x="70" y="460" class="code">Client → Server:</text>
  <text x="70" y="475" class="code">TriggerServerEvent('player:spawnVehicle', 'adder', coords)</text>
  <text x="70" y="490" class="code">TriggerServerEvent('player:buyItem', 'bread', 5)</text>
  
  <text x="400" y="460" class="code">Server → Client:</text>
  <text x="400" y="475" class="code">TriggerClientEvent('vehicle:spawned', source, vehicleId)</text>
  <text x="400" y="490" class="code">TriggerClientEvent('notification:show', -1, 'Server restart in 5 min')</text>
  
  <text x="70" y="515" class="code">Event Registration:</text>
  <text x="70" y="530" class="code">RegisterNetEvent('eventName') -- Must be called before AddEventHandler</text>
  
  <!-- Legend -->
  <rect x="580" y="450" width="160" height="80" class="box" style="fill: #f8f9fa;" />
  <text x="660" y="470" class="text" style="font-weight: bold;">Legend</text>
  <line x1="590" y1="480" x2="610" y2="480" class="event-arrow" />
  <text x="620" y="485" class="text">Network Event</text>
  <line x1="590" y1="495" x2="610" y2="495" class="arrow" />
  <text x="620" y="500" class="text">Local Process</text>
  <rect x="590" y="510" width="15" height="10" class="server-box" />
  <text x="615" y="520" class="text">Server Side</text>
</svg>